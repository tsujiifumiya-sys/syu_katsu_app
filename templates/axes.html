{% extends "base.html" %}
{% block title %}å°±æ´»è»¸{% endblock %}

{% block content %}
<div class="page-header">
    <h1>å°±æ´»è»¸</h1>
    <p class="subtitle">ä¼æ¥­é¸ã³ã§é‡è¦–ã™ã‚‹ä¾¡å€¤è¦³ãƒ»æ¡ä»¶ã‚’å®šç¾©</p>
</div>

<!-- æ—¢å­˜ã®è»¸ä¸€è¦§ -->
{% if axes %}
<div class="axes-list">
    {% for axis in axes %}
    <div class="axis-card" id="axis-{{ axis.id }}">
        <!-- è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰ -->
        <div class="axis-view" id="axis-view-{{ axis.id }}">
            <div class="axis-header">
                <span class="axis-priority">{{ axis.priority }}</span>
                <span class="axis-name">{{ axis.name }}</span>
                <div class="axis-actions">
                    <button type="button" class="btn btn-sm btn-ghost" onclick="toggleEdit({{ axis.id }})">âœï¸
                        ç·¨é›†</button>
                    <form method="POST" action="{{ url_for('main.axis_delete', axis_id=axis.id) }}" class="inline-form"
                        onsubmit="return confirm('å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')">
                        <button type="submit" class="btn btn-sm btn-danger-ghost">âœ•</button>
                    </form>
                </div>
            </div>
            {% if axis.description %}
            <p class="axis-description">{{ axis.description }}</p>
            {% else %}
            <p class="axis-description text-muted">ï¼ˆèª¬æ˜æœªè¨­å®šï¼‰</p>
            {% endif %}
        </div>

        <!-- ç·¨é›†ãƒ¢ãƒ¼ãƒ‰ -->
        <div class="axis-edit" id="axis-edit-{{ axis.id }}" style="display: none;">
            <form method="POST" action="{{ url_for('main.axis_edit', axis_id=axis.id) }}">
                <div class="form-grid">
                    <div class="form-group">
                        <label>è»¸ã®åå‰</label>
                        <input type="text" name="name" value="{{ axis.name }}" required>
                    </div>
                    <div class="form-group">
                        <label>å„ªå…ˆåº¦</label>
                        <input type="number" name="priority" min="1" max="10" value="{{ axis.priority }}">
                    </div>
                </div>
                <div class="form-group">
                    <label>èª¬æ˜ / å®šç¾©</label>
                    <textarea name="description" rows="3"
                        placeholder="ã“ã®è»¸ã®è©³ç´°ãªå®šç¾©">{{ axis.description or '' }}</textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-sm">ä¿å­˜</button>
                    <button type="button" class="btn btn-ghost btn-sm"
                        onclick="toggleEdit({{ axis.id }})">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                </div>
            </form>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <span class="empty-icon">ğŸ¯</span>
    <p>å°±æ´»è»¸ãŒã¾ã å®šç¾©ã•ã‚Œã¦ã„ã¾ã›ã‚“</p>
</div>
{% endif %}

<!-- æ–°è¦è¿½åŠ ãƒ•ã‚©ãƒ¼ãƒ  -->
<div class="add-section" style="margin-top: 2rem;">
    <h3>å°±æ´»è»¸ã‚’è¿½åŠ </h3>
    <form method="POST" action="{{ url_for('main.axis_new') }}" class="form-inline-column">
        <div class="form-grid">
            <div class="form-group">
                <label for="name">è»¸ã®åå‰ <span class="required">*</span></label>
                <input type="text" id="name" name="name" required placeholder="ä¾‹: æŠ€è¡“åŠ›ã®é«˜ã•">
            </div>
            <div class="form-group">
                <label for="priority">å„ªå…ˆåº¦ï¼ˆ1ãŒæœ€é«˜ï¼‰</label>
                <input type="number" id="priority" name="priority" min="1" max="10" value="1">
            </div>
        </div>
        <div class="form-group">
            <label for="description">èª¬æ˜</label>
            <textarea id="description" name="description" rows="2" placeholder="ã“ã®è»¸ã®è©³ç´°ãªå®šç¾©"></textarea>
        </div>
        <button type="submit" class="btn btn-primary">è¿½åŠ ã™ã‚‹</button>
    </form>
</div>

<script>
    function toggleEdit(axisId) {
        const view = document.getElementById('axis-view-' + axisId);
        const edit = document.getElementById('axis-edit-' + axisId);
        if (edit.style.display === 'none') {
            edit.style.display = 'block';
            view.style.display = 'none';
        } else {
            edit.style.display = 'none';
            view.style.display = 'block';
        }
    }
</script>
{% endblock %}